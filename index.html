<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>This Game Doesn't Make Any Sense</title>
  <style>
    /* --------------  previous styles unchanged  -------------- */
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Comic Sans MS',cursive,sans-serif}
    body{background:linear-gradient(135deg,#2c3e50,#4a69bd);height:100vh;display:flex;justify-content:center;align-items:center;color:#fff;text-align:center}
    .screen{display:none;flex-direction:column;align-items:center;justify-content:center}
    .active{display:flex!important}
    .container{background:rgba(0,0,0,.7);padding:30px;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,.5);width:90%;max-width:500px}
    h1{font-size:2rem;margin-bottom:20px;color:#ff9f43}
    .menuButton{display:block;width:100%;padding:12px;margin:8px 0;font-size:1rem;border:none;border-radius:10px;cursor:pointer;background:#ff6b6b;color:#fff}
    .nextLevelBtn{background:#1dd1a1!important}
    #gameArea1{width:300px;height:300px;border:4px dashed #FFD700;border-radius:20px;display:flex;justify-content:center;align-items:center;margin:20px 0;background:rgba(255,255,255,.05);position:relative}
    #gameArea2{width:300px;height:300px;border:4px dashed #2ecc71;border-radius:20px;display:flex;justify-content:center;align-items:center;margin:20px 0;background:rgba(255,255,255,.05);position:relative;overflow:hidden}
    .clickable{cursor:pointer;user-select:none;position:absolute}
    #banana{transition:transform .1s ease}
    #pineapple{font-size:80px;width:1em;height:1em;position:absolute;cursor:pointer;user-select:none;animation:wiggle .5s infinite alternate}
    @keyframes wiggle{from{transform:translateX(-5px) rotate(-3deg)}to{transform:translateX(5px) rotate(3deg)}}
    #message,#score2{min-height:50px;margin:15px 0;padding:10px;background:rgba(255,255,255,.1);border-radius:10px;font-size:1.1rem;line-height:1.4}
    #clickCounter{position:absolute;top:10px;left:10px;font-size:1.2rem;font-weight:bold;color:#FFD700;text-shadow:2px 2px 4px rgba(0,0,0,.5)}
    #score2{color:#2ecc71;font-weight:bold}
    .backButton{background:#48dbfb!important;margin-top:15px}
    #aboutText{margin:20px 0;font-size:1rem;line-height:1.5;max-width:400px;background:rgba(255,255,255,.1);padding:15px;border-radius:10px;overflow-y:auto;max-height:200px;white-space:pre-line}
    /* ===== FIX 1: banana size ===== */
    #banana.clickable{font-size:inherit!important}
  </style>
</head>
<body>

<!-- Main Menu -->
<div id="mainMenu" class="container screen active">
  <h1>This Game Doesn't Make Any Sense</h1>
  <button class="menuButton" id="startBtn">Start</button>
  <button class="menuButton" id="settingsBtn">Settings</button>
  <button class="menuButton" id="aboutBtn">What is this game even about?</button>
</div>

<!-- Level 1 -->
<div id="level1" class="container screen">
  <h1>Banana Clicker of Nonsense</h1>
  <div id="message">Click the banana to begin your journey into chaos...</div>
  <div id="gameArea1">
    <div id="clickCounter">Clicks: 0 / 100</div>
    <div id="banana" class="clickable">üçå</div>
  </div>
  <button class="menuButton backButton" id="backToMenu1">‚Üê Back to Main Menu</button>
</div>

<!-- Level 1 Complete -->
<div id="levelComplete" class="container screen">
  <h1>Level 1 Complete!</h1>
  <div style="font-size:2rem;margin:20px">üçå‚ú®</div>
  <p>You reached Level 1! The banana has ascended.</p>
  <button class="menuButton nextLevelBtn" id="nextLevelBtn">Next Level ‚Üí Pineapple Chaos!</button>
  <button class="menuButton backButton" id="backToMenu2">‚Üê Back to Main Menu</button>
</div>

<!-- Level 2 -->
<div id="level2" class="container screen">
  <h1>Dancing Pineapple of Chaos</h1>
  <div id="score2">Score: 0</div>
  <div id="gameArea2">
    <div id="pineapple" class="clickable">üçç</div>
  </div>
  <button class="menuButton backButton" id="backToMenu3">‚Üê Back to Main Menu</button>
</div>

<!-- Level 2 Complete -->
<div id="level2Complete" class="container screen">
  <h1>Pineapple Chaos Complete!</h1>
  <div style="font-size:2rem;margin:20px">üçç‚ú®</div>
  <p>You clicked 75 times and the pineapple finally got tired.</p>
  <button class="menuButton nextLevelBtn" id="toMenuFrom2">Main Menu</button>
</div>

<!-- Settings / About  -->
<div id="settingsMenu" class="container screen">
  <h1>Settings</h1>
  <p>Language:</p>
  <button class="menuButton" id="langEn">English</button>
  <button class="menuButton" id="langAz">Azerbaijani</button>
  <button class="menuButton backButton" id="settingsBack">‚Üê Back</button>
</div>

<div id="aboutMenu" class="container screen">
  <h1>What is this game even about?</h1>
  <div id="aboutText">This game is about a left-handed toaster that dreams of becoming a cloud‚Ä¶</div>
  <button class="menuButton backButton" id="aboutBack">‚Üê Back</button>
</div>

<script>
/* ===== AUDIO ===== */
const audioCtx=new(window.AudioContext||window.webkitAudioContext)();let bgMusicNode=null,isBgMusicPlaying=!1;
function playClickSound(){audioCtx.state==='suspended'&&audioCtx.resume();const o=audioCtx.createOscillator(),g=audioCtx.createGain();o.type='sine';o.frequency.setValueAtTime(600,audioCtx.currentTime);o.frequency.exponentialRampToValueAtTime(400,audioCtx.currentTime+.1);g.gain.setValueAtTime(.3,audioCtx.currentTime);g.gain.exponentialRampToValueAtTime(.01,audioCtx.currentTime+.15);o.connect(g);g.connect(audioCtx.destination);o.start();o.stop(audioCtx.currentTime+.15)}
function playLevelUpSound(){audioCtx.state==='suspended'&&audioCtx.resume();const t=audioCtx.currentTime;for(let i=0;i<5;i++){const o=audioCtx.createOscillator(),g=audioCtx.createGain();o.type='sine';o.frequency.setValueAtTime(400+i*100,t);g.gain.setValueAtTime(.2,t);g.gain.exponentialRampToValueAtTime(.01,t+.3);o.connect(g);g.connect(audioCtx.destination);o.start(t+i*.1);o.stop(t+i*.1+.3)}}
function startBgMusic(){if(isBgMusicPlaying)return;audioCtx.state==='suspended'&&audioCtx.resume();const l=2;bgMusicNode=audioCtx.createBufferSource();const b=audioCtx.createBuffer(1,audioCtx.sampleRate*l,audioCtx.sampleRate),d=b.getChannelData(0);for(let i=0;i<d.length;i++){const t=i/audioCtx.sampleRate,n=Math.floor(t*2)%3;let f=261.63;if(n===1)f=329.63;else if(n===2)f=392;d[i]=Math.sin(2*Math.PI*f*t)*.1*Math.exp(-Math.sin(Math.PI*t/l)*3)}bgMusicNode.buffer=b;bgMusicNode.loop=!0;bgMusicNode.connect(audioCtx.destination);bgMusicNode.start();isBgMusicPlaying=!0}
function stopBgMusic(){bgMusicNode&&(bgMusicNode.stop(),bgMusicNode=null,isBgMusicPlaying=!1)}
function showScreen(id){document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));document.getElementById(id).classList.add('active');id!=='level2'?stopBgMusic():startBgMusic()}

/* ===== NAVIGATION (bug-free) ===== */
const navMap={
  startBtn:'level1',settingsBtn:'settingsMenu',aboutBtn:'aboutMenu',
  backToMenu1:'mainMenu',backToMenu2:'mainMenu',backToMenu3:'mainMenu',
  settingsBack:'mainMenu',aboutBack:'mainMenu',toMenuFrom2:'mainMenu',nextLevelBtn:'level2'
};
Object.entries(navMap).forEach(([btnId,screenId])=>{
  document.getElementById(btnId).addEventListener('click',()=>showScreen(screenId));
});

/* ===== LEVEL 1 ===== */
let clickCount=0;const maxClicks=100,banana=document.getElementById('banana'),msgEl=document.getElementById('message'),countEl=document.getElementById('clickCounter');
banana.addEventListener('click',()=>{if(clickCount>=maxClicks)return;clickCount++;let msg=`Click #${clickCount} ‚Äî the void smiles.`;if(clickCount===100)msg="You Reached Level 1";msgEl.textContent=msg;countEl.textContent=`Clicks: ${clickCount} / 100`;playClickSound();banana.style.transform='scale(0.9)';setTimeout(()=>banana.style.transform='scale(1)',100);if(clickCount===100){playLevelUpSound();setTimeout(()=>showScreen('levelComplete'),800)}});

/* ===== LEVEL 2 ===== */
let score2=0;const MAX_PINEAPPLE=75;let pineInt=null;const pine=document.getElementById('pineapple'),score2El=document.getElementById('score2'),area2=document.getElementById('gameArea2');
function movePineapple(){const w=pine.offsetWidth,h=pine.offsetHeight,mx=area2.clientWidth-w,my=area2.clientHeight-h;pine.style.left=Math.random()*Math.max(0,mx)+'px';pine.style.top=Math.random()*Math.max(0,my)+'px'}
function startPineappleGame(){score2=0;score2El.textContent=`Score: ${score2}`;movePineapple();pineInt&&clearInterval(pineInt);pineInt=setInterval(movePineapple,2000)}
function stopPineappleGame(){pineInt&&(clearInterval(pineInt),pineInt=null)}
pine.addEventListener('click',()=>{if(score2>=MAX_PINEAPPLE)return;score2++;score2El.textContent=`Score: ${score2}`;playClickSound();if(score2===MAX_PINEAPPLE){stopPineappleGame();playLevelUpSound();setTimeout(()=>showScreen('level2Complete'),500)}});
const obs=new MutationObserver(()=>{const l2=document.getElementById('level2');l2.classList.contains('active')?startPineappleGame():stopPineappleGame()});obs.observe(document.getElementById('level2'),{attributes:!0,attributeFilter:['class']});

/* ===== INIT ===== */
showScreen('mainMenu');
</script>
</body>
    </html>
